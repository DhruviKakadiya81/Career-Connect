<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <title>Dashboard | Doctor</title>
        <meta name="description" content="Helmet application"/>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>
        <!--<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap">-->
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
            }
            
            .dataTableWrapper .ui-datatable th { display: none }


        .dataTableWrapper .ui-datatable tbody td {
            border-bottom: 2px solid #0b8fdc !important;
        }
        
            @keyframes fadeIn {
                0% {
                    opacity: 0;
                }
                100% {
                    opacity: 1;
                }
            }
            .doctor-dashboard-container {
                animation: fadeIn 1s;
            }
            .break-line-1 {
                overflow: hidden;
                text-overflow: ellipsis;
                display: -webkit-div;
                -webkit-line-clamp: 1;
                -webkit-div-orient: vertical;
            }
            .doctor-dashboard-div {
                div-shadow: rgba(181, 181, 181, 0.2) 0px 2px 8px 0px;
                border-radius: 5px;
                margin-bottom: 1.5rem;
            }
            .doctor-dashboard-vector {
                max-height: 120px !important;
            }
            @media only screen and (max-width: 1000px) {
                .doctor-dashboard-div {
                    margin-bottom: 25px;
                }
                .doctor-profile-appointment-title {
                    font-size: 17px !important;
                }
                .doctor-dashboard-statistics-container {
                    margin-top: 5px !important;
                }
            }
            @media only screen and (max-width: 780px) {
                .doctor-dashboard-vector {
                    display: none;
                }
                .doctor-dashboard-progress-container {
                    padding: 20px;
                }
            }

            .dashTitle{
                color: #0b8fdc;
            }


        </style>
    </h:head>
    <f:metadata>
        <f:viewParam value="#{companyCdi.loggedInUser.userId}" name="companyId"/>
        <f:event type="preRenderView" listener="#{approvedJobCdi.findApprovedJobByCompany(companyCdi.loggedInUser.userId)}"/>
    </f:metadata>
    <body>
        <ui:include src="CompanySidebar.xhtml"/>
        <div class="content" id="content">


            <h:form id="dashboardForm" class="pt-3">
                <div class="doctor-dashboard-container bg-white w-100">
                    <div class="ml-3">
                        <h2 class="dashTitle">DASHBOARD</h2>
                        <h4 class="dashTitle">Welcome to Company Dashboard</h4>
                    </div>

                    <div class="doctor-dashboard-container row m-0">
                        <div class="col-md-9 col-lg-9 col-sm-9 row m-0 p-0">

                            <div class="col-lg-12 col-md-12 col-sm-12">
                                <div
                                    class="py-4 doctor-dashboard-div"
                                    style="background-color: #0b8fdc"
                                    borderRadius="5px"
                                    display="flex"
                                    alignItems="flex-start"
                                    justifyContent="space-between"
                                    >
                                    <div class="mx-4 my-1 text-light">
                                        <h4 style="font-weight: 600;color: white" >
                                            Welcome #{companyCdi.loggedInUser.FName}!
                                        </h4>
                                        <h6 class="mt-2">
                                            Here are your important tasks and reports.
                                        </h6>
                                        <h6 variant="h6">
                                            Please check your appointment requests.
                                        </h6>
                                    </div>

                                </div>
                            </div>

                            <div class="col-lg-12 col-md-12 col-sm-12">
                                <div
                                    class="py-3 px-3 doctor-dashboard-div"
                                    style="background-color: #E5E4E2"
                                    >
                                    <div
                                        p="30px"
                                        display="flex"
                                        justifyContent="space-between"
                                        alignItems="center"
                                        >
                                        <div>
                                            <h5
                                                style="font-weight: 600;">
                                                Total job
                                            </h5>
                                            <h3
                                                style="font-weight: bold;color: #0b8fdc"

                                                >
                                                #{adminDashboardCdi.jobCount}
                                            </h3>
                                        </div>
                                    </div>


                                    <div height="250px" m="-20px 20px 0 0">
                                        <p:chart type="line" model="#{lineChart.drawArea}" style="height: 100%; width:90%;margin-left: 70px" />
                                    </div>

                                </div>
                            </div>
                        </div>



                        <div class="col-lg-3 col-md-3 col-sm-3 m-0 ">
                            <div
                                class="py-2 py-lg-3 doctor-dashboard-div doctor-dashboard-sidediv d-flex justify-content-center flex-column"
                                style="background-color: #E5E4E2"
                                borderRadius="5px"
                                >
                                <div style="background-color: #0b8fdc;height: 175px;width: 175px;border-radius: 100%;margin: auto;text-align: center">

                                    <h:outputText value="#{companyCdi.loggedInUser.FName.substring(0, 1)}" 
                                                  styleClass="align-self-center my-4" style="color: white;font-size: 55px;line-height: 175px;"/>

                                </div>

                                <h4
                                    style="font-weight: bold;color: #0b8fdc"
                                    class="align-self-center break-line-1 pt-4 pb-2"
                                    >
                                    #{companyCdi.loggedInUser.FName} #{companyCdi.loggedInUser.LName}
                                </h4>
                                <h6
                                    style="color:#899499"
                                    class="align-self-center break-line-1 mt-1"
                                    >
                                    <span style="font-size: 16px;color: #808080">Email : </span>#{companyCdi.loggedInUser.email}
                                </h6>
                                <h6
                                    style="color:#899499"
                                    class="align-self-center text-center break-line-1"
                                    >
                                    <span style="font-size: 16px;color: #808080">Technology : </span>#{companyCdi.loggedInUser.technology}
                                </h6>
                                <h6
                                    style="color:#899499"
                                    class="mb-3 mb-lg-4 mb-sm-2 align-self-center text-center break-line-1"
                                    >
                                    <span style="font-size: 16px;color: #808080">Specialization : </span>#{companyCdi.loggedInUser.specialization}
                                </h6>
                                <Divider variant="middle" />

                                <Divider variant="middle" class="mb-2" />
                                <div class="p-lg-3 row m-0 g-0"
                                     >
                                    <div class="col-md-12 mb-lg-3 mt-sm-1 doctor-dashboard-statistics-container" >
                                        <h6
                                            style="font-weight: 600;color: #899499"
                                            class='break-line-1'
                                            >
                                            Total Pending
                                        </h6>
                                        <h5
                                            style="font-weight: bold;color: #0b8fdc"
                                            >
                                            9
                                        </h5>
                                    </div>
                                    <div class="col-md-12 mb-lg-3 mt-sm-1 doctor-dashboard-statistics-container">
                                        <h6
                                            style="font-weight: 600;color: #899499"
                                            class='break-line-1'
                                            >
                                            Total Approved
                                        </h6>
                                        <h5
                                            style="font-weight: bold;color: #0b8fdc"
                                            >
                                            #{adminDashboardCdi.cpmpanyCount}
                                        </h5>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <div class="col-lg-12 col-md-12 col-sm-12 row p-0 m-0">
                            <div class="col-lg-6 col-md-6 col-sm-12 mb-3">
                                <div
                                    style="background-color: #E5E4E2;overflow: auto;max-height: 390px;border-radius: 5px"
                                    >
                                    <div
                                        style="display: flex;justify-content: space-between;align-items: center;background-color: #0b8fdc;color: #899499;padding: 15px"
                                        >
                                        <h5
                                            class="text-white"
                                            style="font-weight: 600"
                                            >
                                            Job Pending Requests
                                        </h5>
                                    </div>

                                    <h:form id="jobRequestForm">
                                        <div class="card">
                                            <div class="dataTableWrapper">
                                                <p:dataTable var="job" value="#{jobRequestCdi.jobRequestCollection}">
                                                    <p:column style="width: 50px;">
                                                        <h:outputText value="#{job.userId.FName.substring(0, 1)}#{job.userId.LName.substring(0, 1)}" 
                                                    styleClass="align-self-center my-4" style="background-color: #0b8fdc;color: white;font-size: 25px;line-height: 75px;padding: 5px;border-radius: 100%"/>
                                                    </p:column>
                                                    <p:column>
                                                        <h:outputText value="#{job.userId.FName}" />
                                                        <h:outputText value="#{job.userId.LName}" />
                                                    </p:column>
                                                    <p:column>
                                                        <h:outputText value="#{job.jobId.jobTitle}" />
                                                    </p:column>
                                                    <p:column>
                                                        <h:outputText value="#{job.message}" />
                                                    </p:column>
                                                    <p:column>
                                                        <h:outputText value="#{job.requestedDate}" >
                                                            <f:convertDateTime pattern="dd/MM/yyyy" /></h:outputText>
                                                    </p:column>
                                                    

                                                </p:dataTable>
                                            </div>
                                        </div>
                                    </h:form>

                                </div>
                            </div>



                            <div class="col-lg-6 col-md-6 col-sm-12 mb-3">
                                <div
                                    style="max-height: 390px;border-radius: 5px;background-color: #E5E4E2;overflow: auto"
                                    >
                                    <div
                                        style="display: flex;justify-content: space-between;align-items: center;background-color: #0b8fdc;color: #899499;padding: 15px;border-radius: 5px"
                                        >
                                        <h5
                                            class="text-white"
                                            style="font-weight: 600"
                                            >
                                            Approved Job
                                        </h5>
                                    </div>
                                    
                                    <h:form>
                                        <div class="card">
                                            <div class="dataTableWrapper">
                                                <p:dataTable var="item" value="#{approvedJobCdi.approvedJobCollection}">
                                                    
                                                    <p:column>
                                                        <h:outputText value="#{item.userId.FName} #{item.userId.LName}" />
                                                    </p:column>
                                                    <p:column>
                                                        <h:outputText value="#{item.status}" />
                                                    </p:column>
                                                    <p:column>
                                                        <h:outputText value="#{item.approvedDate}" />
                                                    </p:column>
                                                    <p:column>
                                                        <h:outputText value="#{item.salary}" />
                                                    </p:column>

                                                    <p:column>
                                                        <h:outputText value="#{item.jobId.jobTitle}" />
                                                    </p:column>

                                                </p:dataTable>
                                            </div>
                                        </div>
                                    </h:form>
                                    
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </h:form>
        </div>
    </body>
</html>
